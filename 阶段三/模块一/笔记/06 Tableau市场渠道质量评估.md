### 1 基础知识

> 留存率 = 第 t + n日活跃量 / t日激活量
>
> ROI = LTV 贡献 /人均消耗
>
> (ROI (Return On Investment )，即投资回报比)
>
> LTV 贡献 ：根据公司业务不同而不同。电商行业以GMV（网站成交金额，包括付款和未付款）或者CPS（刨除成本之后的利润）为度量；信息流行业以广告收入为度量。
>
> 其中LTV=由生命周期活跃天数*单周期内贡献价值

### 2 基本思路

> 要评估市场渠道质量，我们需要知道每天每个渠道给我们带来的新增用户数、以及这些渠道带来的用户的留存情况。其次，我们需要根据我们在每个渠道的投入金额来计算各个渠道的投资回报比。最后，我们根据各渠道带来的新用户数、留存率以及它们的投资回报比来对各个渠道进行划分等级，找出好的渠道和有待改进的渠道。

目标仪表盘： 

<img src="https://blog20200906.oss-cn-hangzhou.aliyuncs.com/uPic/image-20200926220811886.png" alt="image-20200926220811886" style="zoom:50%;" />



### 3 操作 

#### 3.1 载入数据 

打开数据源：“市场渠道每日激活量和留存率”进行载入。该excel表分为三个表格，具体介绍如下：

> **1 ”渠道每日消耗“表**。 字段包括”激活日期“、‘’渠道ID”、“消耗”
>
> **2 “渠道维度”表**。字段有：“投放时间”、“渠道ID”、“投放位置”、“投放素材”、“投放类型”（文字、图片、宣传单等）
>
> **3 “激活量、留存率”表**。字段有：“激活日期”、‘’渠道ID“、”激活量“、”次日留存量“、”次日留存率“、”LTV“

因此，我们的仪表盘需要用到这三个表中的数据，因此首先将表3和表1按”激活日期“、”渠道ID“进行左连接，再将表3与表2按”渠道ID“左连接。 

<img src="https://blog20200906.oss-cn-hangzhou.aliyuncs.com/uPic/image-20200926222150724.png" alt="image-20200926222150724" style="zoom:50%;" />

#### 3.2 检测最近3天每日各渠道的拉新量和留存率的变化 

1）建立目标表格

<img src="https://blog20200906.oss-cn-hangzhou.aliyuncs.com/uPic/image-20200927064352958.png" alt="image-20200927064352958" style="zoom:50%;" />

筛选时右键选择”应用于工作表“-->‘’此数据源的所有项”

2）用标记卡调整可视化元素 

<img src="https://blog20200906.oss-cn-hangzhou.aliyuncs.com/uPic/image-20200927065638525.png" alt="image-20200927065638525" style="zoom:50%;" />

注意：上面标记卡这里的“自动”不要忘记改为“方形”。

#### 3.3 监测渠道ROI情况;以突出显示表显示ROI 小于1的渠道

1) 计算ROI

ROI = 人均LTV 贡献 /人均消耗，而我们的数据中只有总消耗，因此首先需要计算人均消耗：消耗/激活量。接着计算ROI = LTV/人均消耗。 （上面用新建计算字段实现）  

利用ROI数据,我们可以呈现每一天各个渠道的ROI，结果如下：  

<img src="https://blog20200906.oss-cn-hangzhou.aliyuncs.com/uPic/image-20200927070612843.png" alt="image-20200927070612843" style="zoom:50%;" />

2）对ROI进行分类和可视化

因为目标是要找出ROI小于1的渠道，因此我们可以新建一个字段，用IF语句判断小于1的ROI，然后将其拖入标记卡进行可视化。

ROI分类：

<img src="https://blog20200906.oss-cn-hangzhou.aliyuncs.com/uPic/image-20200927071005958.png" alt="image-20200927071005958" style="zoom:25%;" />

ROI可视化： 

<img src="https://blog20200906.oss-cn-hangzhou.aliyuncs.com/uPic/image-20200927071753526.png" alt="image-20200927071753526" style="zoom:50%;" />



#### 3.4 渠道综合评估分级:根据留存率和ROI以散点图的形式展示渠道分级

X轴：放入各渠道平均次日留存率：sum（次日留存人数)/sum（总激活量）。

Y轴：放入ROI的平均值：sum(每天的LTV)/SUM(每天的人均消耗)

> 如果次日留存率、ROI本身比较稳定，可以直接在行列中对度量进行平均值计算，结果与上面的计算相差不大。

计算完X、Y轴字段后，为x、Y轴添加参考线。

<img src="https://blog20200906.oss-cn-hangzhou.aliyuncs.com/uPic/image-20200927074054984.png" alt="image-20200927074054984" style="zoom:40%;" />

结果可以找出留存率和ROI较高的渠道和表现不好的渠道： 

<img src="https://blog20200906.oss-cn-hangzhou.aliyuncs.com/uPic/image-20200927074200537.png" alt="image-20200927074200537" style="zoom:50%;" />

为了探究原因，可以把左侧的一些数据到标签中来查看，比如把“投放类型”、“投放素材”等放上来，然后在标记卡的标签选项选择"允许标签覆盖其他标记"来看下这些因素与渠道在不同象限的分布有关。 

除了用参考线，可以在分析处用群集来进行分组。

<img src="https://blog20200906.oss-cn-hangzhou.aliyuncs.com/uPic/image-20200927085141494.png" alt="image-20200927085141494" style="zoom:50%;" />

 

> 其他思考：  
>
> 以上都只是一些定性的分析，可以看做一种探索性的分析。如果要定量探究各个渠道的ROI表现与什么因素相关，可以通过多层线性回归方程：将ROI作为因变量，将投放位置、类型、素材等作为因变量来进行探究，操作方法可以参考知乎上包寒吴霜《多层线性模型：原理、关键议题与R语言实现》。

#### 3.5 建立仪表盘

最后，在仪表盘中将三组数据拖进来，自己修改想要的格式就行。

<img src="https://blog20200906.oss-cn-hangzhou.aliyuncs.com/uPic/image-20200927090027118.png" alt="image-20200927090027118" style="zoom:50%;" />

